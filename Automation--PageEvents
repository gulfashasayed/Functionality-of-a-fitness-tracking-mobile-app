import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.Assert;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

public class UserRegistrationandLogin {
    private WebDriver driver;

    @BeforeMethod
    public void BrowsersetUp() {
        // Set up the WebDriver instance
        System.setProperty("webdriver.chrome.driver", "path/to/chromedriver");
        driver = new ChromeDriver();
        driver.manage().window().maximize();
        driver.get("your_app_url");
    }

    //REGISTRATION
    public String UserRegistration() throws InterruptedException {
        // Test user registration with valid information
        driver.findElement(By.id("register-link")).click();
        driver.findElement(By.id("username")).sendKeys("testuser");
        driver.findElement(By.id("password")).sendKeys("testpassword");
        driver.findElement(By.id("email")).sendKeys("testuser@example.com");
        driver.findElement(By.id("register-button")).click();
        String successMessage = driver.findElement(By.id("success-message")).getText();
		return successMessage;
	
	}


        // Verify successful registration message
        String successMessage = driver.findElement(By.id("success-message")).getText();
        Assert.assertEquals(successMessage, "Registration successful. Please log in.");
    }

    //LOGIN
    public void UserLogin() throws InterruptedException {
        // Test user login with valid credentials
        driver.findElement(By.id("login-link")).click();
        driver.findElement(By.id("username")).sendKeys("testuser");
        driver.findElement(By.id("password")).sendKeys("testpassword");
        driver.findElement(By.id("login-button")).click();

        // Verify successful login by checking the presence of a welcome message
        String welcomeMessage = driver.findElement(By.id("welcome-message")).getText();
        Assert.assertTrue(welcomeMessage.contains("Welcome, testuser!"));
    }

    public void InvalidLoginAttempt() {
        // Test invalid login attempt with wrong credentials
        driver.findElement(By.id("login-link")).click();
        driver.findElement(By.id("username")).sendKeys("testuser");
        driver.findElement(By.id("password")).sendKeys("wrongpassword");
        driver.findElement(By.id("login-button")).click();

        // Verify appropriate error message for invalid login attempt
        String errorMessage = driver.findElement(By.id("error-message")).getText();
        Assert.assertEquals(errorMessage, "Invalid username or password. Please try again.");
    }

    @AfterMethod
    public void QuitBrowser() {
        // Quit the WebDriver instance
        driver.quit();
    }
}
